{"ast":null,"code":"import { globalThis } from \"../utils/server-safe-globals.js\";\nimport { MediaUIEvents, StreamTypes, TextTrackKinds, TextTrackModes } from \"../constants.js\";\nimport { getTextTracksList, parseTracks, updateTracksModeTo } from \"../utils/captions.js\";\nimport { getSubtitleTracks, toggleSubtitleTracks } from \"./util.js\";\nconst requestMap = {\n  /**\n   * @TODO Consider adding state to `StateMediator` for e.g. `mediaThumbnailCues` and use that for derived state here (CJP)\n   */\n  [MediaUIEvents.MEDIA_PREVIEW_REQUEST](stateMediator, stateOwners, {\n    detail\n  }) {\n    var _a, _b, _c;\n    const {\n      media\n    } = stateOwners;\n    const mediaPreviewTime = detail != null ? detail : void 0;\n    let mediaPreviewImage = void 0;\n    let mediaPreviewCoords = void 0;\n    if (media && mediaPreviewTime != null) {\n      const [track] = getTextTracksList(media, {\n        kind: TextTrackKinds.METADATA,\n        label: \"thumbnails\"\n      });\n      const cue = Array.prototype.find.call((_a = track == null ? void 0 : track.cues) != null ? _a : [], (c, i, cs) => {\n        if (i === 0) return c.endTime > mediaPreviewTime;\n        if (i === cs.length - 1) return c.startTime <= mediaPreviewTime;\n        return c.startTime <= mediaPreviewTime && c.endTime > mediaPreviewTime;\n      });\n      if (cue) {\n        const base = !/'^(?:[a-z]+:)?\\/\\//i.test(cue.text) ? (_b = media == null ? void 0 : media.querySelector('track[label=\"thumbnails\"]')) == null ? void 0 : _b.src : void 0;\n        const url = new URL(cue.text, base);\n        const previewCoordsStr = new URLSearchParams(url.hash).get(\"#xywh\");\n        mediaPreviewCoords = previewCoordsStr.split(\",\").map(numStr => +numStr);\n        mediaPreviewImage = url.href;\n      }\n    }\n    const mediaDuration = stateMediator.mediaDuration.get(stateOwners);\n    const mediaChaptersCues = stateMediator.mediaChaptersCues.get(stateOwners);\n    let mediaPreviewChapter = (_c = mediaChaptersCues.find((c, i, cs) => {\n      if (i === cs.length - 1 && mediaDuration === c.endTime) {\n        return c.startTime <= mediaPreviewTime && c.endTime >= mediaPreviewTime;\n      }\n      return c.startTime <= mediaPreviewTime && c.endTime > mediaPreviewTime;\n    })) == null ? void 0 : _c.text;\n    if (detail != null && mediaPreviewChapter == null) {\n      mediaPreviewChapter = \"\";\n    }\n    return {\n      mediaPreviewTime,\n      mediaPreviewImage,\n      mediaPreviewCoords,\n      mediaPreviewChapter\n    };\n  },\n  [MediaUIEvents.MEDIA_PAUSE_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaPaused\";\n    const value = true;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_PLAY_REQUEST](stateMediator, stateOwners) {\n    var _a, _b, _c, _d;\n    const key = \"mediaPaused\";\n    const value = false;\n    const isLive = stateMediator.mediaStreamType.get(stateOwners) === StreamTypes.LIVE;\n    const canAutoSeekToLive = !((_a = stateOwners.options) == null ? void 0 : _a.noAutoSeekToLive);\n    const isDVR = stateMediator.mediaTargetLiveWindow.get(stateOwners) > 0;\n    if (isLive && canAutoSeekToLive && !isDVR) {\n      const seekableEnd = (_b = stateMediator.mediaSeekable.get(stateOwners)) == null ? void 0 : _b[1];\n      if (seekableEnd) {\n        const seekToLiveOffset = (_d = (_c = stateOwners.options) == null ? void 0 : _c.seekToLiveOffset) != null ? _d : 0;\n        const liveEdgeTime = seekableEnd - seekToLiveOffset;\n        stateMediator.mediaCurrentTime.set(liveEdgeTime, stateOwners);\n      }\n    }\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_PLAYBACK_RATE_REQUEST](stateMediator, stateOwners, {\n    detail\n  }) {\n    const key = \"mediaPlaybackRate\";\n    const value = detail;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_MUTE_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaMuted\";\n    const value = true;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_UNMUTE_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaMuted\";\n    const value = false;\n    if (!stateMediator.mediaVolume.get(stateOwners)) {\n      stateMediator.mediaVolume.set(0.25, stateOwners);\n    }\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_VOLUME_REQUEST](stateMediator, stateOwners, {\n    detail\n  }) {\n    const key = \"mediaVolume\";\n    const value = detail;\n    if (value && stateMediator.mediaMuted.get(stateOwners)) {\n      stateMediator.mediaMuted.set(false, stateOwners);\n    }\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_SEEK_REQUEST](stateMediator, stateOwners, {\n    detail\n  }) {\n    const key = \"mediaCurrentTime\";\n    const value = detail;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_SEEK_TO_LIVE_REQUEST](stateMediator, stateOwners) {\n    var _a, _b, _c;\n    const key = \"mediaCurrentTime\";\n    const seekableEnd = (_a = stateMediator.mediaSeekable.get(stateOwners)) == null ? void 0 : _a[1];\n    if (Number.isNaN(Number(seekableEnd))) return;\n    const seekToLiveOffset = (_c = (_b = stateOwners.options) == null ? void 0 : _b.seekToLiveOffset) != null ? _c : 0;\n    const value = seekableEnd - seekToLiveOffset;\n    stateMediator[key].set(value, stateOwners);\n  },\n  // Text Tracks state change requests\n  [MediaUIEvents.MEDIA_SHOW_SUBTITLES_REQUEST](_stateMediator, stateOwners, {\n    detail\n  }) {\n    var _a;\n    const {\n      options\n    } = stateOwners;\n    const tracks = getSubtitleTracks(stateOwners);\n    const tracksToUpdate = parseTracks(detail);\n    const preferredLanguage = (_a = tracksToUpdate[0]) == null ? void 0 : _a.language;\n    if (preferredLanguage && !options.noSubtitlesLangPref) {\n      globalThis.localStorage.setItem(\"media-chrome-pref-subtitles-lang\", preferredLanguage);\n    }\n    updateTracksModeTo(TextTrackModes.SHOWING, tracks, tracksToUpdate);\n  },\n  [MediaUIEvents.MEDIA_DISABLE_SUBTITLES_REQUEST](_stateMediator, stateOwners, {\n    detail\n  }) {\n    const tracks = getSubtitleTracks(stateOwners);\n    const tracksToUpdate = detail != null ? detail : [];\n    updateTracksModeTo(TextTrackModes.DISABLED, tracks, tracksToUpdate);\n  },\n  [MediaUIEvents.MEDIA_TOGGLE_SUBTITLES_REQUEST](_stateMediator, stateOwners, {\n    detail\n  }) {\n    toggleSubtitleTracks(stateOwners, detail);\n  },\n  // Renditions/Tracks state change requests\n  [MediaUIEvents.MEDIA_RENDITION_REQUEST](stateMediator, stateOwners, {\n    detail\n  }) {\n    const key = \"mediaRenditionSelected\";\n    const value = detail;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_AUDIO_TRACK_REQUEST](stateMediator, stateOwners, {\n    detail\n  }) {\n    const key = \"mediaAudioTrackEnabled\";\n    const value = detail;\n    stateMediator[key].set(value, stateOwners);\n  },\n  // State change requests dependent on root node\n  [MediaUIEvents.MEDIA_ENTER_PIP_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsPip\";\n    const value = true;\n    if (stateMediator.mediaIsFullscreen.get(stateOwners)) {\n      stateMediator.mediaIsFullscreen.set(false, stateOwners);\n    }\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_EXIT_PIP_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsPip\";\n    const value = false;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_ENTER_FULLSCREEN_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsFullscreen\";\n    const value = true;\n    if (stateMediator.mediaIsPip.get(stateOwners)) {\n      stateMediator.mediaIsPip.set(false, stateOwners);\n    }\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_EXIT_FULLSCREEN_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsFullscreen\";\n    const value = false;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_ENTER_CAST_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsCasting\";\n    const value = true;\n    if (stateMediator.mediaIsFullscreen.get(stateOwners)) {\n      stateMediator.mediaIsFullscreen.set(false, stateOwners);\n    }\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_EXIT_CAST_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsCasting\";\n    const value = false;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_AIRPLAY_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsAirplaying\";\n    const value = true;\n    stateMediator[key].set(value, stateOwners);\n  }\n};\nexport { requestMap };","map":{"version":3,"names":["globalThis","MediaUIEvents","StreamTypes","TextTrackKinds","TextTrackModes","getTextTracksList","parseTracks","updateTracksModeTo","getSubtitleTracks","toggleSubtitleTracks","requestMap","MEDIA_PREVIEW_REQUEST","stateMediator","stateOwners","detail","_a","_b","_c","media","mediaPreviewTime","mediaPreviewImage","mediaPreviewCoords","track","kind","METADATA","label","cue","Array","prototype","find","call","cues","c","i","cs","endTime","length","startTime","base","test","text","querySelector","src","url","URL","previewCoordsStr","URLSearchParams","hash","get","split","map","numStr","href","mediaDuration","mediaChaptersCues","mediaPreviewChapter","MEDIA_PAUSE_REQUEST","key","value","set","MEDIA_PLAY_REQUEST","_d","isLive","mediaStreamType","LIVE","canAutoSeekToLive","options","noAutoSeekToLive","isDVR","mediaTargetLiveWindow","seekableEnd","mediaSeekable","seekToLiveOffset","liveEdgeTime","mediaCurrentTime","MEDIA_PLAYBACK_RATE_REQUEST","MEDIA_MUTE_REQUEST","MEDIA_UNMUTE_REQUEST","mediaVolume","MEDIA_VOLUME_REQUEST","mediaMuted","MEDIA_SEEK_REQUEST","MEDIA_SEEK_TO_LIVE_REQUEST","Number","isNaN","MEDIA_SHOW_SUBTITLES_REQUEST","_stateMediator","tracks","tracksToUpdate","preferredLanguage","language","noSubtitlesLangPref","localStorage","setItem","SHOWING","MEDIA_DISABLE_SUBTITLES_REQUEST","DISABLED","MEDIA_TOGGLE_SUBTITLES_REQUEST","MEDIA_RENDITION_REQUEST","MEDIA_AUDIO_TRACK_REQUEST","MEDIA_ENTER_PIP_REQUEST","mediaIsFullscreen","MEDIA_EXIT_PIP_REQUEST","MEDIA_ENTER_FULLSCREEN_REQUEST","mediaIsPip","MEDIA_EXIT_FULLSCREEN_REQUEST","MEDIA_ENTER_CAST_REQUEST","MEDIA_EXIT_CAST_REQUEST","MEDIA_AIRPLAY_REQUEST"],"sources":["/Users/kelaiyaparikh/projects/first-app/client/node_modules/media-chrome/dist/media-store/request-map.js"],"sourcesContent":["import { globalThis } from \"../utils/server-safe-globals.js\";\nimport {\n  MediaUIEvents,\n  StreamTypes,\n  TextTrackKinds,\n  TextTrackModes\n} from \"../constants.js\";\nimport {\n  getTextTracksList,\n  parseTracks,\n  updateTracksModeTo\n} from \"../utils/captions.js\";\nimport { getSubtitleTracks, toggleSubtitleTracks } from \"./util.js\";\nconst requestMap = {\n  /**\n   * @TODO Consider adding state to `StateMediator` for e.g. `mediaThumbnailCues` and use that for derived state here (CJP)\n   */\n  [MediaUIEvents.MEDIA_PREVIEW_REQUEST](stateMediator, stateOwners, { detail }) {\n    var _a, _b, _c;\n    const { media } = stateOwners;\n    const mediaPreviewTime = detail != null ? detail : void 0;\n    let mediaPreviewImage = void 0;\n    let mediaPreviewCoords = void 0;\n    if (media && mediaPreviewTime != null) {\n      const [track] = getTextTracksList(media, {\n        kind: TextTrackKinds.METADATA,\n        label: \"thumbnails\"\n      });\n      const cue = Array.prototype.find.call((_a = track == null ? void 0 : track.cues) != null ? _a : [], (c, i, cs) => {\n        if (i === 0)\n          return c.endTime > mediaPreviewTime;\n        if (i === cs.length - 1)\n          return c.startTime <= mediaPreviewTime;\n        return c.startTime <= mediaPreviewTime && c.endTime > mediaPreviewTime;\n      });\n      if (cue) {\n        const base = !/'^(?:[a-z]+:)?\\/\\//i.test(cue.text) ? (_b = media == null ? void 0 : media.querySelector(\n          'track[label=\"thumbnails\"]'\n        )) == null ? void 0 : _b.src : void 0;\n        const url = new URL(cue.text, base);\n        const previewCoordsStr = new URLSearchParams(url.hash).get(\"#xywh\");\n        mediaPreviewCoords = previewCoordsStr.split(\",\").map((numStr) => +numStr);\n        mediaPreviewImage = url.href;\n      }\n    }\n    const mediaDuration = stateMediator.mediaDuration.get(stateOwners);\n    const mediaChaptersCues = stateMediator.mediaChaptersCues.get(stateOwners);\n    let mediaPreviewChapter = (_c = mediaChaptersCues.find((c, i, cs) => {\n      if (i === cs.length - 1 && mediaDuration === c.endTime) {\n        return c.startTime <= mediaPreviewTime && c.endTime >= mediaPreviewTime;\n      }\n      return c.startTime <= mediaPreviewTime && c.endTime > mediaPreviewTime;\n    })) == null ? void 0 : _c.text;\n    if (detail != null && mediaPreviewChapter == null) {\n      mediaPreviewChapter = \"\";\n    }\n    return {\n      mediaPreviewTime,\n      mediaPreviewImage,\n      mediaPreviewCoords,\n      mediaPreviewChapter\n    };\n  },\n  [MediaUIEvents.MEDIA_PAUSE_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaPaused\";\n    const value = true;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_PLAY_REQUEST](stateMediator, stateOwners) {\n    var _a, _b, _c, _d;\n    const key = \"mediaPaused\";\n    const value = false;\n    const isLive = stateMediator.mediaStreamType.get(stateOwners) === StreamTypes.LIVE;\n    const canAutoSeekToLive = !((_a = stateOwners.options) == null ? void 0 : _a.noAutoSeekToLive);\n    const isDVR = stateMediator.mediaTargetLiveWindow.get(stateOwners) > 0;\n    if (isLive && canAutoSeekToLive && !isDVR) {\n      const seekableEnd = (_b = stateMediator.mediaSeekable.get(stateOwners)) == null ? void 0 : _b[1];\n      if (seekableEnd) {\n        const seekToLiveOffset = (_d = (_c = stateOwners.options) == null ? void 0 : _c.seekToLiveOffset) != null ? _d : 0;\n        const liveEdgeTime = seekableEnd - seekToLiveOffset;\n        stateMediator.mediaCurrentTime.set(liveEdgeTime, stateOwners);\n      }\n    }\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_PLAYBACK_RATE_REQUEST](stateMediator, stateOwners, { detail }) {\n    const key = \"mediaPlaybackRate\";\n    const value = detail;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_MUTE_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaMuted\";\n    const value = true;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_UNMUTE_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaMuted\";\n    const value = false;\n    if (!stateMediator.mediaVolume.get(stateOwners)) {\n      stateMediator.mediaVolume.set(0.25, stateOwners);\n    }\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_VOLUME_REQUEST](stateMediator, stateOwners, { detail }) {\n    const key = \"mediaVolume\";\n    const value = detail;\n    if (value && stateMediator.mediaMuted.get(stateOwners)) {\n      stateMediator.mediaMuted.set(false, stateOwners);\n    }\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_SEEK_REQUEST](stateMediator, stateOwners, { detail }) {\n    const key = \"mediaCurrentTime\";\n    const value = detail;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_SEEK_TO_LIVE_REQUEST](stateMediator, stateOwners) {\n    var _a, _b, _c;\n    const key = \"mediaCurrentTime\";\n    const seekableEnd = (_a = stateMediator.mediaSeekable.get(stateOwners)) == null ? void 0 : _a[1];\n    if (Number.isNaN(Number(seekableEnd)))\n      return;\n    const seekToLiveOffset = (_c = (_b = stateOwners.options) == null ? void 0 : _b.seekToLiveOffset) != null ? _c : 0;\n    const value = seekableEnd - seekToLiveOffset;\n    stateMediator[key].set(value, stateOwners);\n  },\n  // Text Tracks state change requests\n  [MediaUIEvents.MEDIA_SHOW_SUBTITLES_REQUEST](_stateMediator, stateOwners, { detail }) {\n    var _a;\n    const { options } = stateOwners;\n    const tracks = getSubtitleTracks(stateOwners);\n    const tracksToUpdate = parseTracks(detail);\n    const preferredLanguage = (_a = tracksToUpdate[0]) == null ? void 0 : _a.language;\n    if (preferredLanguage && !options.noSubtitlesLangPref) {\n      globalThis.localStorage.setItem(\n        \"media-chrome-pref-subtitles-lang\",\n        preferredLanguage\n      );\n    }\n    updateTracksModeTo(TextTrackModes.SHOWING, tracks, tracksToUpdate);\n  },\n  [MediaUIEvents.MEDIA_DISABLE_SUBTITLES_REQUEST](_stateMediator, stateOwners, { detail }) {\n    const tracks = getSubtitleTracks(stateOwners);\n    const tracksToUpdate = detail != null ? detail : [];\n    updateTracksModeTo(TextTrackModes.DISABLED, tracks, tracksToUpdate);\n  },\n  [MediaUIEvents.MEDIA_TOGGLE_SUBTITLES_REQUEST](_stateMediator, stateOwners, { detail }) {\n    toggleSubtitleTracks(stateOwners, detail);\n  },\n  // Renditions/Tracks state change requests\n  [MediaUIEvents.MEDIA_RENDITION_REQUEST](stateMediator, stateOwners, { detail }) {\n    const key = \"mediaRenditionSelected\";\n    const value = detail;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_AUDIO_TRACK_REQUEST](stateMediator, stateOwners, { detail }) {\n    const key = \"mediaAudioTrackEnabled\";\n    const value = detail;\n    stateMediator[key].set(value, stateOwners);\n  },\n  // State change requests dependent on root node\n  [MediaUIEvents.MEDIA_ENTER_PIP_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsPip\";\n    const value = true;\n    if (stateMediator.mediaIsFullscreen.get(stateOwners)) {\n      stateMediator.mediaIsFullscreen.set(false, stateOwners);\n    }\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_EXIT_PIP_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsPip\";\n    const value = false;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_ENTER_FULLSCREEN_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsFullscreen\";\n    const value = true;\n    if (stateMediator.mediaIsPip.get(stateOwners)) {\n      stateMediator.mediaIsPip.set(false, stateOwners);\n    }\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_EXIT_FULLSCREEN_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsFullscreen\";\n    const value = false;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_ENTER_CAST_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsCasting\";\n    const value = true;\n    if (stateMediator.mediaIsFullscreen.get(stateOwners)) {\n      stateMediator.mediaIsFullscreen.set(false, stateOwners);\n    }\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_EXIT_CAST_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsCasting\";\n    const value = false;\n    stateMediator[key].set(value, stateOwners);\n  },\n  [MediaUIEvents.MEDIA_AIRPLAY_REQUEST](stateMediator, stateOwners) {\n    const key = \"mediaIsAirplaying\";\n    const value = true;\n    stateMediator[key].set(value, stateOwners);\n  }\n};\nexport {\n  requestMap\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}